!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["my-router-history"]=e():t["my-router-history"]=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(a,i){try{var o=e[a](i),s=o.value}catch(t){return void n(t)}if(!o.done)return Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)});t(s)}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var c=n(4),u=n(1),h=n(6),f=n(10),l="MyRouterHistory:window",p=Symbol("location"),d={push:null,replace:null,goback:null,reload:null},_=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(i(this,t),this._config=e,this._state=Object.assign({},d,{type:0,hashChange:function(){}}),this._stateStack=[],this._notBusyDef=null,this.onBeforeChange=null,this.onChange=null,this._win=n,this._win[l])throw new Error("There are already other undestroyed history instances. Please destroy them before you can create a new history instance.");this._config=Object.assign({gobackName:"go back",root:"/",insertRoot:!0},e),this._hashchangeHandler=this._hashchangeHandler.bind(this),this._initHistory()}return s(t,[{key:"_initGoback",value:function(t){this._gobackState=this._pathToState("/goback",void 0,"GOBACK",t-1);var e=this._win.history.state;return(!e||"GOBACK"!==e.type||!sessionStorage["MyRouterHistory:initGoback"])&&(!(!e||"NORMAL"!==e.type||!sessionStorage["MyRouterHistory:initGoback"])||(sessionStorage["MyRouterHistory:initGoback"]=!0,this._replaceState(this._gobackState),!1))}},{key:"_initHistory",value:function(){var t=this;if(!h.canUseDOM)throw new Error("Hash history needs a DOM");var e=Date.now(),n=this._decodePath(this._getHrefToPath()),r=this._pathToState(n,void 0,"NORMAL",e),a=this._initGoback(e);this._push(r,!a),this._config.insertRoot&&this._stackTop.location.href!==this._config.root&&this._stateStack.unshift(this._pathToState(this._config.root,void 0,"NORMAL",e)),this._initEventListener(),this._win[l]=!0,this._switchState(1),Promise.resolve().then(function(){var e=t._readonlyLocation(r);t._execCallback(t.onChange)("init",null,e,[],[e])})}},{key:"_hashchangeHandler",value:function(t){this._state.hashChange(t)}},{key:"_initEventListener",value:function(){this._win.addEventListener("hashchange",this._hashchangeHandler)}},{key:"_destroyEventListener",value:function(){this._win.removeEventListener("hashchange",this._hashchangeHandler)}},{key:"_switchState",value:function(t){var e=this,n=function(t){var e=this,n=!1===t,r="function"==typeof t;if(n||r){r&&h.nextTick(function(){t.call(e)});var a=new Error("User cancelled");throw a.isCancelled=!0,a}if(t instanceof Error)throw t},r=this._readonlyLocation.bind(this);switch(t){case 1:this._state={type:1,push:function(){var t=a(regeneratorRuntime.mark(function t(a,i){var o,s,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._checkData(i),e._switchState(6),t.prev=2,o=e._pathToState(a,i,"NORMAL"),s=r(o),c=r(e._stackTop),t.next=8,e._execCallback(e.onBeforeChange)("push",c,s,[],[s]);case 8:return u=t.sent,n(u),e._push(o),t.next=13,new Promise(function(t){return h.nextTick(t)});case 13:return t.next=15,e._execCallback(e.onChange)("push",c,s,[],[s]);case 15:return e._switchState(1),t.abrupt("return",e._readonlyLocation(o));case 19:throw t.prev=19,t.t0=t.catch(2),e._switchState(1),t.t0;case 23:case"end":return t.stop()}},t,e,[[2,19]])}));return function(e,n){return t.apply(this,arguments)}}(),replace:function(){var t=a(regeneratorRuntime.mark(function t(a,i){var o,s,c,u,f;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._checkData(i),e._switchState(6),t.prev=2,o=Date.now(),s=e._pathToState(a,i,"NORMAL",o),c=r(s),u=r(e._stackTop),t.next=9,e._execCallback(e.onBeforeChange)("replace",u,c,[u],[c]);case 9:return f=t.sent,n(f),e._replace(s),t.next=14,new Promise(function(t){return h.nextTick(t)});case 14:return e._switchState(1),t.next=17,e._execCallback(e.onChange)("replace",u,c,[u],[c]);case 17:return t.abrupt("return",e._readonlyLocation(s));case 20:throw t.prev=20,t.t0=t.catch(2),e._switchState(1),t.t0;case 24:case"end":return t.stop()}},t,e,[[2,20]])}));return function(e,n){return t.apply(this,arguments)}}(),goback:function(){var t=a(regeneratorRuntime.mark(function t(){var a,i,o,s,c,u,f,l,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._switchState(3),t.prev=1,a=void 0,i=void 0,o=void 0,s=void 0,c=!1,u=void 0,"number"!=typeof p){t.next=16;break}if(!(p<=0)){t.next=13;break}return t.abrupt("return",null);case 13:u=p>=e._stateStack.length?function(){return!1}:function(t,n){return e._stateStack.length-n-1===p};case 14:t.next=17;break;case 16:"string"==typeof p?u=function(t){return t.href===e._pathToLocation(p).href}:"function"==typeof p&&(u=p);case 17:return f=e._stateStack.findIndex(function(t,e){return u(r(t),e)}),a=r(e._stackTop),-1===f?(o=e._pathToState(e._pathToLocation("string"==typeof p?p:e._config.root),"NORMAL",void 0),s=r(o),i=e._stateStack.map(function(t){return r(t)}),c=!0):(o=e._stateStack[f],s=r(o),i=e._stateStack.slice(f+1).map(function(t){return r(t)}).reverse()),t.next=22,e._execCallback(e.onBeforeChange)("goback",a,s,i,c?[s]:[]);case 22:return l=t.sent,n(l),e._goback(i.length,c?o:null,!1),t.next=27,new Promise(function(t){return h.nextTick(t)});case 27:return e._switchState(1),t.next=30,e._execCallback(e.onChange)("goback",a,s,i,c?[s]:[]);case 30:return t.abrupt("return",e._readonlyLocation(o));case 33:throw t.prev=33,t.t0=t.catch(1),e._switchState(1),t.t0;case 37:case"end":return t.stop()}},t,e,[[1,33]])}));return function(){return t.apply(this,arguments)}}(),reload:function(){return e._state.replace(e._stackTop.location.href)},hashChange:function(t){var n=e._win.history.state;n&&"GOBACK"===n.type?(e._pushState(e._stackTop),e._state.goback(1)):n||e._getHrefToPath(t.oldURL)!==e._stateStack[e._stateStack.length-1].location.href?(e._correct(),e._win.history.back()):(e._switchState(2),e._stateData=e._getHrefToPath(t.newURL),e._win.history.go(-2))}},this._notBusyDef&&(this._notBusyDef.resolve(void 0),this._notBusyDef=null);break;case 2:this._state=Object.assign({type:2},d,{hashChange:function(t){var n=e._win.history.state;if(n&&"NORMAL"===n.type)e._win.history.back();else if(n&&"GOBACK"===n.type){var r=Date.now(),a=e._pathToLocation(e._stateData,r);e._switchState(1),e._pushState(e._stackTop),e._state.push(a.href)}else e._correct(),e._win.history.back()}});break;case 3:case 6:this._state=Object.assign({type:t},d,{hashChange:function(t){e._win.history.state||e._getHrefToPath(t.oldURL)!==e._stateStack[e._stateStack.length-1].location.href?e._pushState(e._stackTop):e._correct()}});break;case 4:case 5:this._state=Object.assign({type:t},d,{hashChange:function(t){e._win.history.back()}});break;case 7:this._state={type:t,hashChange:function(t){e._win.history.back()},push:function(){var t=a(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._notBusyDef=new f.Deferred,t.abrupt("return",e._notBusyDef.promise.then(function(){return e.push(n,r)}));case 2:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),replace:function(){var t=a(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._notBusyDef=new f.Deferred,t.abrupt("return",e._notBusyDef.promise.then(function(){return e.replace(n,r)}));case 2:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),goback:function(){var t=a(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._notBusyDef=new f.Deferred,t.abrupt("return",e._notBusyDef.promise.then(function(){return e.goback(n)}));case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),reload:function(){var t=a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e._notBusyDef=new f.Deferred,t.abrupt("return",e._notBusyDef.promise.then(function(){return e.reload()}));case 2:case"end":return t.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}()}}}},{key:"_encodePath",value:function(t){return u.addLeadingSlash(t)}},{key:"_decodePath",value:function(t){return u.addLeadingSlash(t)}},{key:"_getHrefToPath",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._win.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}},{key:"_checkData",value:function(t){null!=t&&JSON.stringify(t)}},{key:"_checkState",value:function(){if(this.isBusy){var t=new Error("MyHistory busy");throw t.isBusy=!0,t}}},{key:"_pathToLocation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return t=this._decodePath(t),c.createLocation(t,e+"")}},{key:"_pathToState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments[2],r=arguments[3],a=void 0;return a="object"===(void 0===t?"undefined":o(t))?t:this._pathToLocation(t,r),{location:a,type:n,timeStamp:r,data:JSON.parse(JSON.stringify(e))}}},{key:"_readonlyLocation",value:function(t){var e=t.data,n=Object.assign({},t.location,{state:e}),a=r({},p,n);return Object.keys(n).forEach(function(t){Object.defineProperty(a,t,{get:function(){return this[p][t]},set:function(){},enumerable:!0})}),a}},{key:"_push",value:function(){function t(t){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r?(n=this._win.document.title,this._win.document.title=this._config.gobackName,this._pushState(e),this._win.document.title=n):this._replaceState(e),this._stateStack.push(e);case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"_replace",value:function(){function t(t){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._stateStack.pop(),this._stateStack.push(e),r?(n=this._win.document.title,this._win.document.title=this._config.gobackName,this._pushState(e),this._win.document.title=n):this._replaceState(e);case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"_goback",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(t<=0)){this._stateStack.splice(Math.max(0,this._stateStack.length-t)),e&&this._stateStack.push(e);var r=this._stateStack[this._stateStack.length-1];n?this._pushState(r):this._replaceState(r)}}},{key:"_replaceState",value:function(t){this._win.history.replaceState(t,null,"#"+this._encodePath(t.location.href))}},{key:"_pushState",value:function(t){this._win.history.pushState(t,null,"#"+this._encodePath(t.location.href))}},{key:"_correct",value:function(){console.error("异常",this._stateStack,this._win.history.state,location.hash);var t=this._initGoback(this._gobackState.timeStamp);this._push(this._stackTop,!t)}},{key:"push",value:function(t,e){return this._checkState(),this._state.push(t,e)}},{key:"replace",value:function(t,e){return this._checkState(),this._state.replace(t,e)}},{key:"goback",value:function(t){return this._checkState(),this._state.goback(t)}},{key:"reload",value:function(){return this._checkState(),this._state.reload()}},{key:"destroy",value:function(){function t(){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(){var e,n,r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this._destroyEventListener(),this.onBeforeChange=null,this.onChange=null,this._notBusyDef&&(e=new Error("User cancelled"),e.isCancelled=!0,this._notBusyDef.reject(e),this._notBusyDef=null),sessionStorage["MyRouterHistory:initGoback"]=!1,n=function(){var t=a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!r._win.history.state||"NORMAL"!==r._win.history.state.type){t.next=8;break}return r._win.history.back(),t.next=4,new Promise(function(t){return setTimeout(t,50)});case 4:return t.next=6,n();case 6:t.next=19;break;case 8:if(!r._win.history.state){t.next=17;break}return r._win.history.replaceState(null,null,"#"+r._stackTop.location.href),r._win.location.hash="#"+r._stackTop.location.href,t.next=13,new Promise(function(t){return setTimeout(t,50)});case 13:return t.next=15,n();case 15:t.next=19;break;case 17:return t.next=19,new Promise(function(t){return setTimeout(t,50)});case 19:case"end":return t.stop()}},t,r)}));return function(){return t.apply(this,arguments)}}(),t.next=8,n();case 8:this._stateStack=null,this._config=null,this._stateData=null,this._state=null,this._win===window&&delete this._win[l],this._win=null;case 14:case"end":return t.stop()}},t,this)}));return t}()},{key:"_execCallback",value:function(t){var e=this;return"function"==typeof t?function(){var n=a(regeneratorRuntime.mark(function n(){for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];var o,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return o=e._state.type,n.prev=1,e._switchState(7),n.next=5,t.apply(e,a);case 5:return s=n.sent,e._switchState(o),n.abrupt("return",s);case 10:throw n.prev=10,n.t0=n.catch(1),e._switchState(o),n.t0;case 14:case"end":return n.stop()}},n,e,[[1,10]])}));return function(){return n.apply(this,arguments)}}():function(){return Promise.resolve()}}},{key:"_stackTop",get:function(){return this._stateStack.length?this._stateStack[this._stateStack.length-1]:null}},{key:"stack",get:function(){var t=this;return this._stateStack.map(function(e){return t._readonlyLocation(e)})}},{key:"length",get:function(){return this._stateStack.length}},{key:"isBusy",get:function(){return 1!==this._state.type&&7!==this._state.type||this._notBusyDef&&7===this._state.type}},{key:"location",get:function(){return this._readonlyLocation(this._stackTop)}}]),t}();e.MyHistory=_},function(t,e,n){"use strict";function r(t){return"/"===t.charAt(0)?t:"/"+t}function a(t){var e=t||"/",n="",r="",a=e.indexOf("#");-1!==a&&(r=e.substr(a),e=e.substr(0,a));var i=e.indexOf("?");return-1!==i&&(n=e.substr(i),e=e.substr(0,i)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r,key:"",get href(){return this.pathname+this.search+this.hash}}}Object.defineProperty(e,"__esModule",{value:!0}),e.addLeadingSlash=r,e.parsePath=a},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(0));var r=n(0);e.default=r.MyHistory},function(t,e,n){"use strict";function r(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=void 0;"string"==typeof t?r=o.parsePath(t):(r=Object.assign({},t),void 0===r.pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search="?"+r.search):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash="#"+r.hash):r.hash="");try{r.pathname=decodeURI(r.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+r.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return e&&(r.key=e),n?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=i.default(r.pathname,n.pathname)):r.pathname=n.pathname:r.pathname||(r.pathname="/"),r}function a(t){return s!==t&&(s=t,c=0),100*s+c++}Object.defineProperty(e,"__esModule",{value:!0});var i=n(5),o=n(1);e.createLocation=r;var s=void 0,c=0;e.crateNo=a},function(t,e,n){"use strict";function r(t){return"/"===t.charAt(0)}function a(t,e){for(var n=e,r=n+1,a=t.length;r<a;n+=1,r+=1)t[n]=t[r];t.pop()}function i(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t&&t.split("/")||[],i=e&&e.split("/")||[],o=t&&r(t),s=e&&r(e),c=o||s;if(t&&r(t)?i=n:n.length&&(i.pop(),i=i.concat(n)),!i.length)return"/";var u=void 0;if(i.length){var h=i[i.length-1];u="."===h||".."===h||""===h}else u=!1;for(var f=0,l=i.length;l>=0;l--){var p=i[l];"."===p?a(i,l):".."===p?(a(i,l),f++):f&&(a(i,l),f--)}if(!c)for(;f--;f)i.unshift("..");!c||""===i[0]||i[0]&&r(i[0])||i.unshift("");var d=i.join("/");return u&&"/"!==d.substr(-1)&&(d+="/"),d}Object.defineProperty(e,"__esModule",{value:!0}),e.default=i},function(t,e,n){"use strict";(function(t){function n(e,n){var r=function(){"function"==typeof e&&e.call(n)};if(void 0!==t)t(r);else if("undefined"==typeof MessageChannel||!/native code/.test(MessageChannel.toString())&&"[object MessageChannelConstructor]"!==MessageChannel.toString())setTimeout(r,0);else{var a=new MessageChannel,i=a.port2;a.port1.onmessage=r,i.postMessage(1)}}Object.defineProperty(e,"__esModule",{value:!0}),e.canUseDOM=!("undefined"==typeof window||!window.document||!window.document.createElement),e.nextTick=n}).call(e,n(7).setImmediate)},function(t,e,n){(function(t){function r(t,e){this._id=t,this._clearFn=e}var a=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;e.setTimeout=function(){return new r(i.call(setTimeout,a,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,a,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(a,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(8),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(e,n(2))},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return u[c]=r,s(c),c++}function a(t){delete u[t]}function i(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function o(t){if(h)setTimeout(o,0,t);else{var e=u[t];if(e){h=!0;try{i(e)}finally{a(t),h=!1}}}}if(!t.setImmediate){var s,c=1,u={},h=!1,f=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?function(){s=function(t){e.nextTick(function(){o(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&o(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),s=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){o(t.data)},s=function(e){t.port2.postMessage(e)}}():f&&"onreadystatechange"in f.createElement("script")?function(){var t=f.documentElement;s=function(e){var n=f.createElement("script");n.onreadystatechange=function(){o(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():function(){s=function(t){setTimeout(o,0,t)}}(),l.setImmediate=r,l.clearImmediate=a}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,n(2),n(9))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function i(t){if(f===clearTimeout)return clearTimeout(t);if((f===r||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(t);try{return f(t)}catch(e){try{return f.call(null,t)}catch(e){return f.call(this,t)}}}function o(){_&&p&&(_=!1,p.length?d=p.concat(d):y=-1,d.length&&s())}function s(){if(!_){var t=a(o);_=!0;for(var e=d.length;e;){for(p=d,d=[];++y<e;)p&&p[y].run();y=-1,e=d.length}p=null,_=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var h,f,l=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{f="function"==typeof clearTimeout?clearTimeout:r}catch(t){f=r}}();var p,d=[],_=!1,y=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new c(t,e)),1!==d.length||_||a(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=u,l.addListener=u,l.once=u,l.off=u,l.removeListener=u,l.removeAllListeners=u,l.emit=u,l.prependListener=u,l.prependOnceListener=u,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){var e=this;r(this,t),this.$isFinished=!1,this.promise=new Promise(function(t,n){e.$resolve=t,e.$reject=n})}return a(t,[{key:"resolve",value:function(t){this.$isFinished=!0,this.$resolve(t)}},{key:"reject",value:function(t){this.$isFinished=!0,this.$reject(t)}},{key:"isFinished",get:function(){return this.$isFinished}}]),t}();e.Deferred=i}])});
//# sourceMappingURL=index.js.map